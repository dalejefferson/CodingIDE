/* ==========================================================================
   IPhoneFrame — Pure CSS phone bezel with webview inside
   Device-specific sizes scaled to ~40% to fit in the preview panel.
   ========================================================================== */

/* ── Container ───────────────────────────────────────────────────────────── */

.iphone-frame-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-sm);
  height: 100%;
}

/* ── Device Selector Dropdown ────────────────────────────────────────────── */

.device-selector {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-primary);
  background: var(--color-bg-secondary);
  color: var(--color-text-primary);
  font-family: inherit;
  font-size: var(--font-size-sm);
  cursor: pointer;
  outline: none;
  appearance: none;
  padding-right: var(--space-xl);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M3 5l3 3 3-3' fill='none' stroke='%236e6e73' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--space-xs) center;
  transition:
    border-color var(--transition-fast),
    background var(--transition-fast);
}

.device-selector:hover {
  border-color: var(--color-border-secondary);
}

.device-selector:focus-visible {
  border-color: var(--color-accent);
  box-shadow: var(--shadow-focus);
}

/* ── Phone Frame ─────────────────────────────────────────────────────────── */

.iphone-frame {
  position: relative;
  background: #1a1a1a;
  border-radius: 40px;
  padding: 12px;
  box-shadow:
    0 0 0 2px #333,
    inset 0 0 0 2px #111,
    0 8px 30px rgba(0, 0, 0, 0.3);
  transition:
    width 0.3s ease,
    height 0.3s ease;
}

/* Dynamic Island (modern iPhones) */
.iphone-frame::before {
  content: '';
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 24px;
  background: #000;
  border-radius: 12px;
  z-index: 10;
}

/* Home Indicator */
.iphone-frame::after {
  content: '';
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 4px;
  background: #555;
  border-radius: 2px;
}

/* ── Device Sizes (scaled to ~40%) ───────────────────────────────────────── */
/* iPhone 16 Pro: 393x852 @ 40% = ~157x341 + padding */

.iphone-frame--iphone-16-pro {
  width: 181px;
  height: 365px;
}

/* iPhone 16 Pro Max: 430x932 @ 40% = ~172x373 + padding */
.iphone-frame--iphone-16-pro-max {
  width: 196px;
  height: 397px;
}

/* iPhone 15: 390x844 @ 40% = ~156x338 + padding */
.iphone-frame--iphone-15 {
  width: 180px;
  height: 362px;
}

/* iPhone SE: 375x667 @ 40% = ~150x267 + padding */
.iphone-frame--iphone-se {
  width: 174px;
  height: 291px;
  border-radius: 32px;
}

/* iPhone SE has no dynamic island or notch */
.iphone-frame--iphone-se::before {
  width: 0;
  height: 0;
}

/* iPhone SE has a physical button, no home indicator pill */
.iphone-frame--iphone-se::after {
  width: 28px;
  height: 28px;
  bottom: 6px;
  border-radius: 50%;
  background: transparent;
  border: 2px solid #444;
}

/* ── Webview Inside the Frame ────────────────────────────────────────────── */

.iphone-frame webview,
.iphone-frame .iphone-frame__webview {
  display: flex;
  width: 100%;
  height: 100%;
  border-radius: 28px;
  overflow: hidden;
  background: #fff;
  border: none;
}

/* ── Placeholder (Metro not ready) ───────────────────────────────────────── */

.iphone-frame__placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  width: 100%;
  height: 100%;
  border-radius: 28px;
  overflow: hidden;
  background: var(--color-bg-tertiary, #f5f5f5);
}

.iphone-frame__placeholder-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border-primary);
  border-top-color: var(--color-accent);
  border-radius: 50%;
  animation: iphone-spinner 0.8s linear infinite;
}

@keyframes iphone-spinner {
  to {
    transform: rotate(360deg);
  }
}

.iphone-frame__placeholder-text {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  text-align: center;
  padding: 0 var(--space-sm);
}

/* ── HMR Pulse Animation ────────────────────────────────────────────────── */

.iphone-frame--hmr-pulse {
  animation: hmr-pulse 0.6s ease-out;
}

@keyframes hmr-pulse {
  0% {
    box-shadow:
      0 0 0 2px #333,
      inset 0 0 0 2px #111,
      0 0 0 0 rgba(34, 197, 94, 0.7);
  }
  50% {
    box-shadow:
      0 0 0 2px #333,
      inset 0 0 0 2px #111,
      0 0 0 8px rgba(34, 197, 94, 0.3);
  }
  100% {
    box-shadow:
      0 0 0 2px #333,
      inset 0 0 0 2px #111,
      0 0 0 0 rgba(34, 197, 94, 0);
  }
}

/* ── Notch Element (for explicit notch rendering) ────────────────────────── */

.iphone-frame__notch {
  position: absolute;
  top: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 40%;
  height: 12px;
  background: #000;
  border-radius: 0 0 8px 8px;
  z-index: 10;
}

/* ── Home Bar Indicator Element ──────────────────────────────────────────── */

.iphone-frame__home-bar {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  width: 36%;
  height: 4px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
  z-index: 10;
}

/* ── Device Label ────────────────────────────────────────────────────────── */

.iphone-frame-label {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  text-align: center;
}
